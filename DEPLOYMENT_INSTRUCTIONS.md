# Инструкция по развертыванию

## Обновление счетчика Яндекс.Метрики

Код счетчика Яндекс.Метрики был обновлен и теперь размещен в `<head>` секции для максимально ранней загрузки.

### Что изменилось

1. **Код счетчика добавлен в `src/app/layout.tsx`** в секцию `<head>`
2. **Используется стратегия `beforeInteractive`** для ранней загрузки
3. **ID счетчика: `103855878`**
4. **Убрано дублирование** из компонента Analytics

### Файлы для развертывания

- `src/app/layout.tsx` - основной код счетчика
- `src/components/Analytics.tsx` - обновленный компонент (без Яндекс.Метрики)
- `env.production` - переменные окружения
- `src/app/test-analytics/page.tsx` - тестовая страница

### Проверка после развертывания

1. Откройте любую страницу сайта
2. Нажмите F12 для открытия консоли
3. Проверьте отсутствие ошибок JavaScript
4. Убедитесь, что загружается скрипт `mc.yandex.ru`
5. Проверьте тестовую страницу `/test-analytics`

### Важные моменты

- Счетчик загружается до интерактивности страницы
- Обеспечивается отслеживание даже при быстром закрытии
- Поддержка SSR и SPA навигации
- Все настройки через переменные окружения

### Команды для развертывания

```bash
# Сборка проекта
npm run build

# Запуск в production
npm start

# Или через PM2
pm2 restart ecosystem.config.js
```

### Проверка в Яндекс.Метрике

1. Войдите в [metrika.yandex.ru](https://metrika.yandex.ru/)
2. Выберите счетчик `103855878`
3. Проверьте поступление данных в реальном времени

