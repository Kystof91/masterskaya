// SEO конфигурация для сайта

export interface SEOConfig {
  siteName: string;
  siteUrl: string;
  defaultTitle: string;
  defaultDescription: string;
  defaultKeywords: string[];
  defaultImage: string;
  author: string;
  language: string;
  locale: string;
}

export interface PageSEO {
  title: string;
  description: string;
  keywords: string[];
  image?: string;
  canonical?: string;
  noindex?: boolean;
  structuredData?: object;
}

// Основная конфигурация сайта
export const seoConfig: SEOConfig = {
  siteName: 'Мастерская - Лечение зависимостей',
  siteUrl: 'https://mstrclinic.ru',
  defaultTitle: 'Мастерская - Лечение зависимостей | Медицинский центр в Санкт-Петербурге',
  defaultDescription: 'Профессиональная помощь в лечении алкогольной и наркотической зависимости в Санкт-Петербурге. Анонимно, конфиденциально, эффективно. Детоксикация, реабилитация, психотерапия.',
  defaultKeywords: [
    'лечение зависимостей',
    'наркология',
    'алкоголизм',
    'наркомания',
    'детоксикация',
    'реабилитация',
    'психотерапия',
    'Санкт-Петербург',
    'анонимно',
    'круглосуточно',
    'вывод из запоя',
    'лечение алкоголизма',
    'лечение наркомании',
    'капельницы',
    'кодирование',
    'психиатр-нарколог'
  ],
  defaultImage: '/logotip.png',
  author: 'Мастерская - Лечение зависимостей',
  language: 'ru',
  locale: 'ru_RU'
};

// SEO настройки для основных страниц
export const pageSEO: Record<string, PageSEO> = {
  home: {
    title: 'Мастерская - Лечение зависимостей | Главная',
    description: 'Профессиональная помощь в лечении алкогольной и наркотической зависимости в Санкт-Петербурге. Анонимно, конфиденциально, эффективно. Детоксикация, реабилитация, психотерапия.',
    keywords: ['лечение зависимостей', 'наркология', 'алкоголизм', 'наркомания', 'детоксикация', 'реабилитация', 'психотерапия', 'Санкт-Петербург', 'анонимно', 'круглосуточно'],
    canonical: '/'
  },
  about: {
    title: 'О клинике Мастерская | Лечение зависимостей в Санкт-Петербурге',
    description: 'Узнайте о клинике Мастерская - современном медицинском центре в Санкт-Петербурге. Опытные врачи, лицензированные услуги, анонимное лечение зависимостей.',
    keywords: ['клиника Мастерская', 'медицинский центр', 'лечение зависимостей', 'Санкт-Петербург', 'врачи наркологи', 'лицензия', 'опыт работы'],
    canonical: '/about'
  },
  services: {
    title: 'Услуги клиники Мастерская | Детоксикация, реабилитация, психотерапия',
    description: 'Полный спектр услуг по лечению зависимостей: детоксикация, реабилитация, психотерапия, семейная терапия. Индивидуальный подход к каждому пациенту.',
    keywords: ['услуги клиники', 'детоксикация', 'реабилитация', 'психотерапия', 'семейная терапия', 'лечение зависимостей', 'индивидуальный подход'],
    canonical: '/services'
  },
  health: {
    title: 'Лечение зависимостей | Здоровье и восстановление в клинике Мастерская',
    description: 'Комплексное лечение зависимостей с фокусом на здоровье и восстановление. Современные методики, опытные специалисты, индивидуальные программы.',
    keywords: ['лечение зависимостей', 'здоровье', 'восстановление', 'методики лечения', 'специалисты', 'индивидуальные программы'],
    canonical: '/health'
  },
  methods: {
    title: 'Методы лечения зависимостей | Современные подходы в клинике Мастерская',
    description: 'Современные методы лечения зависимостей: медикаментозная терапия, психотерапия, реабилитационные программы. Доказанная эффективность.',
    keywords: ['методы лечения', 'медикаментозная терапия', 'психотерапия', 'реабилитационные программы', 'эффективность лечения', 'современные подходы'],
    canonical: '/methods'
  },
  prices: {
    title: 'Цены на лечение зависимостей | Стоимость услуг в клинике Мастерская',
    description: 'Прозрачные цены на лечение зависимостей в клинике Мастерская. Детоксикация, реабилитация, психотерапия. Бесплатная консультация.',
    keywords: ['цены на лечение', 'стоимость услуг', 'детоксикация', 'реабилитация', 'психотерапия', 'бесплатная консультация', 'прозрачные цены'],
    canonical: '/prices'
  },
  reviews: {
    title: 'Отзывы о клинике Мастерская | Реальные истории выздоровления',
    description: 'Отзывы пациентов о лечении в клинике Мастерская. Реальные истории выздоровления, оценки качества услуг, рекомендации.',
    keywords: ['отзывы о клинике', 'истории выздоровления', 'качество услуг', 'рекомендации', 'пациенты', 'результаты лечения'],
    canonical: '/reviews'
  },
  blog: {
    title: 'Блог о лечении зависимостей | Полезные статьи от клиники Мастерская',
    description: 'Полезные статьи о лечении зависимостей, профилактике, восстановлении. Экспертные мнения, советы специалистов, актуальная информация.',
    keywords: ['блог о лечении', 'статьи о зависимостях', 'профилактика', 'восстановление', 'экспертные мнения', 'советы специалистов'],
    canonical: '/blog'
  },
  contacts: {
    title: 'Контакты клиники Мастерская | Запись на консультацию в Санкт-Петербурге',
    description: 'Контакты клиники Мастерская в Санкт-Петербурге. Адрес, телефоны, режим работы. Запись на консультацию, выезд врача на дом.',
    keywords: ['контакты клиники', 'адрес', 'телефоны', 'режим работы', 'запись на консультацию', 'выезд врача', 'Санкт-Петербург'],
    canonical: '/contacts'
  }
};

// SEO настройки для статей блога
export const blogSEO: Record<string, PageSEO> = {
  detox: {
    title: 'ДЕТОКС - Выведение из запоя и лечение зависимостей | Клиника Мастерская',
    description: 'Индивидуально подобранные курсы детоксикации с помощью капельниц для быстрого восстановления организма и выведения токсинов. Лечение алкоголизма и наркомании.',
    keywords: ['детокс', 'выведение из запоя', 'капельницы', 'алкоголизм', 'наркомания', 'детоксикация', 'восстановление организма', 'токсины'],
    canonical: '/blog/1'
  },
  specialized_courses: {
    title: 'Специализированные курсы капельниц для восстановления организма | Мастерская',
    description: 'Обзор самых эффективных методик лечения наркотической зависимости. Специализированные курсы капельниц для комплексного восстановления.',
    keywords: ['специализированные курсы', 'капельницы', 'лечение наркомании', 'восстановление организма', 'эффективные методики', 'комплексное лечение'],
    canonical: '/blog/2'
  },
  psychotherapy: {
    title: 'Психотерапия и психологическая помощь | Пакеты лечения в клинике Мастерская',
    description: 'Пакеты психотерапии с выгодными условиями для вашего восстановления. Индивидуальные и групповые сеансы с опытными специалистами.',
    keywords: ['психотерапия', 'психологическая помощь', 'пакеты лечения', 'индивидуальные сеансы', 'групповые сеансы', 'восстановление'],
    canonical: '/blog/3'
  },
  group_therapy: {
    title: 'Групповая терапия - Сила поддержки на пути к трезвости | Мастерская',
    description: 'Что делать после завершения лечения, чтобы избежать возвращения к зависимости. Групповая терапия как эффективный метод поддержки.',
    keywords: ['групповая терапия', 'поддержка', 'трезвость', 'профилактика рецидивов', 'выздоровление', 'после лечения'],
    canonical: '/blog/4'
  },
  package_offers: {
    title: 'Пакетные предложения лечения зависимостей | Клиника Мастерская',
    description: 'Описание пакетных предложений для лечения зависимостей. Поддержка нервной системы, сердечно-сосудистой системы, печени.',
    keywords: ['пакетные предложения', 'лечение зависимостей', 'поддержка нервной системы', 'сердечно-сосудистая система', 'печень', 'комплексное лечение'],
    canonical: '/blog/5'
  },
  clinic_info: {
    title: 'Клиника Мастерская - Профессиональная помощь в борьбе с зависимостями',
    description: 'Современная клиника в Санкт-Петербурге, специализирующаяся на лечении алкоголизма и наркомании. Комплексный подход, индивидуальное лечение.',
    keywords: ['клиника Мастерская', 'Санкт-Петербург', 'лечение алкоголизма', 'лечение наркомании', 'комплексный подход', 'индивидуальное лечение'],
    canonical: '/blog/6'
  },
  addictions_article: {
    title: 'Алкоголь и наркотики - Разрушительная сила зависимостей | Пути к выздоровлению',
    description: 'О последствиях зависимостей и эффективных методах лечения в клинике Мастерская. Современные подходы к лечению алкоголизма и наркомании.',
    keywords: ['алкоголь', 'наркотики', 'зависимости', 'последствия', 'методы лечения', 'алкоголизм', 'наркомания', 'выздоровление'],
    canonical: '/blog/7'
  }
};

// Функция для генерации полного заголовка страницы
export function generatePageTitle(pageKey: string, customTitle?: string): string {
  if (customTitle) {
    return customTitle.includes(seoConfig.siteName) 
      ? customTitle 
      : `${customTitle} | ${seoConfig.siteName}`;
  }
  
  const pageConfig = pageSEO[pageKey] || blogSEO[pageKey];
  return pageConfig ? pageConfig.title : seoConfig.defaultTitle;
}

// Функция для генерации мета-описания
export function generatePageDescription(pageKey: string, customDescription?: string): string {
  if (customDescription) {
    return customDescription.length > 160 
      ? customDescription.substring(0, 157) + '...' 
      : customDescription;
  }
  
  const pageConfig = pageSEO[pageKey] || blogSEO[pageKey];
  return pageConfig ? pageConfig.description : seoConfig.defaultDescription;
}

// Функция для генерации ключевых слов
export function generatePageKeywords(pageKey: string, customKeywords?: string[]): string[] {
  if (customKeywords && customKeywords.length > 0) {
    return [...customKeywords, ...seoConfig.defaultKeywords.slice(0, 5)];
  }
  
  const pageConfig = pageSEO[pageKey] || blogSEO[pageKey];
  return pageConfig ? [...pageConfig.keywords, ...seoConfig.defaultKeywords.slice(0, 3)] : seoConfig.defaultKeywords;
}

// Функция для получения канонического URL
export function getCanonicalUrl(pageKey: string, customCanonical?: string): string {
  if (customCanonical) {
    return customCanonical.startsWith('http') 
      ? customCanonical 
      : `${seoConfig.siteUrl}${customCanonical}`;
  }
  
  const pageConfig = pageSEO[pageKey] || blogSEO[pageKey];
  return pageConfig && pageConfig.canonical 
    ? `${seoConfig.siteUrl}${pageConfig.canonical}` 
    : seoConfig.siteUrl;
}
